

## ChainMaker-docs

## 1、智能合约开发语言和虚拟机.



| 语言     | 类型                        |
| -------- | --------------------------- |
| 系统合约 | RuntimeType_NATIVE = 1      |
| Rust     | RuntimeType_WASMER = 2      |
| C++      | RuntimeType_WXVM = 3        |
| TinyGo   | RuntimeType_GASM = 4        |
| Solidity | RuntimeType_EVM = 5         |
| Golang   | RuntimeType_DOCKER_GO = 6   |
| Java     | RuntimeType_DOCKER_JAVA = 7 |



#  2、链操作

## 2.1 链扩容

区块链 rollup 是一种扩容解决方案,它可以有效地提高区块链网络的吞吐量和交易处理能力。基本原理是:

1. 将多笔交易"捆绑"成一个批量交易,称为 rollup。
2. 这些交易先在 rollup 中进行处理和验证,然后一起提交到主链上。
3. 主链只需验证 rollup 本身,而不是每一笔单独的交易,从而大幅提高了效率。

常见的 rollup 技术包括:

1. Optimistic Rollup：基于乐观的假设,先假设交易都是合法的,在有人质疑时再进行验证。
2. Zero-Knowledge Rollup (ZK-Rollup)：使用零知识证明技术,在不披露交易细节的情况下证明交易的正确性。
3. Validium：类似 ZK-Rollup,但交易数据存储在链下,只有验证结果上链。

这些 rollup 技术各有优劣,适用于不同的场景。它们都旨在在不损害安全性的前提下,大幅提升区块链网络的可扩展性和性能。

总的来说,区块链 rollup 是一个非常重要的扩容解决方案,是当前区块链技术发展的热点方向之一。未来随着 rollup 技术的进一步发展,区块链的应用前景将更加广阔。



### 2.1.1  zk-rollup

假设有一个基于以太坊的隐私保护型去中心化交易所应用,它采用了 ZK-Rollup 技术来提高性能和隐私性。

具体流程如下:

用户在交易所应用上发起交易,如买入或卖出代币。这些交易细节被保密,不会直接上链。
交易所应用的 ZK-Rollup 合约会将多笔交易"捆绑"成一个批次,并使用零知识证明技术对这个批次进行验证。
ZK-Rollup 合约生成一个简洁的零知识证明,证明这个批次交易的正确性,但不透露任何交易细节。
这个零知识证明被提交到以太坊主网上。以太坊节点只需验证这个证明,就可以确认整个批次交易的有效性,而不需要了解具体的交易内容。
用户的交易记录和余额信息都被安全地保存在 ZK-Rollup 合约中,而不会暴露在公开的以太坊主链上。
这种 ZK-Rollup 方式可以在不损害安全性的前提下,大幅提升交易所的性能和隐私保护能力。

类似的 ZK-Rollup 技术还可以应用于其他需要高度隐私保护的区块链应用,如数字身份管理、隐私计算、匿名支付等。它是实现区块链隐私保护的一个重要手段。

总的来说,ZK-Rollup 是 rollup 技术的一个重要分支,它结合了零知识证明技术,能够为区块链应用带来兼顾性能和隐私的扩容解决方案。







# 2.2 跨链

跨链是指不同区块链之间进行交互和资产转移的技术。在区块链生态迅速发展的今天,跨链技术变得越来越重要。

主要有以下几种跨链实现方式:

1. 中继链/桥接链：
   - 利用一条专门的中继链来连接其他区块链,充当转接桥梁。
   - 典型案例包括 Polkadot 的跨链方案。
2. 哈希时间锁定合约(HTLC)：
   - 利用智能合约实现资产的原子交换,确保跨链交易的安全性。
   - 这种方式不需要中继链,但需要参与链都支持HTLC。
3. 侧链/主子链：
   - 利用一条侧链与主链进行双向锚定和资产转移。
   - 比如比特币的 Liquid Network 就是一种侧链解决方案。
4. 中心化桥接：
   - 由中心化组织运营的跨链桥梁,实现不同区块链之间的资产转移。
   - 这种方式安全性依赖于中心化机构,但实现相对简单。

不同的跨链方案各有优缺点,适用于不同的场景。总的来说,跨链技术正在推动区块链生态的进一步整合和发展,是区块链技术发展的重要方向之一。



## 2.2.1 哈希时间锁定合约( HTLC )跨链技术方案

HTLC 是一种利用智能合约实现跨链原子交换的技术。它的核心原理如下:

1. 资产锁定:
   - 当 Alice 想要从区块链 A 向 Bob 转移资产到区块链 B 时,她会在区块链 A 上部署一个 HTLC 合约,锁定待转移的资产。
2. 哈希密码生成:
   - Alice 随机生成一个哈希值 H 及其对应的密码 S。然后将 H 提供给 Bob。
3. 资产兑换:
   - Bob 在区块链 B 上部署一个对应的 HTLC 合约,其中包含 H 作为兑换条件。
   - 当 Bob 提供正确的密码 S 时,区块链 B 上的 HTLC 合约会向 Bob 转移资产。
4. 密码验证:
   - 同时,区块链 A 上的 HTLC 合约也会检查 Bob 是否提供了正确的密码 S,如果是,则向 Alice 转移资产。
5. 时间锁定:
   - HTLC 合约还设置了一个时间锁定,如果在规定时间内 Bob 没有提供正确的密码,Alice 就可以取回区块链 A 上锁定的资产。

这样一来,资产的转移就被"锁定"在 HTLC 合约中,只有在两个区块链上的 HTLC 合约同时成功执行时,资产才能完成转移,从而保证了跨链交易的原子性。

HTLC 技术广泛应用于支持跨链交易的区块链项目,如 Bitcoin, Ethereum, Litecoin 等。它是一种简单高效的跨链解决方案,但也需要参与链都支持 HTLC 智能合约功能。

总的来说,HTLC 技术通过利用哈希值、时间锁定等机制,实现了不同区块链之间的安全可靠的资产交换,是跨链领域的一种重要技术方案。



## 2.2.2 Liquid Network 介绍侧链/主链的跨链解决方案



Liquid Network 是比特币生态中的一个侧链解决方案,它与比特币的主链进行双向锚定,实现了比特币资产在两条链之间的转移。

它的工作原理如下:

1. 用户将比特币从主链锁定到 Liquid Network 的智能合约中。这个过程称为"比特币的挂起"。
2. Liquid Network 就会在侧链上铸造等量的 Liquid BTC(L-BTC),并将其发放给用户。这样用户就拥有了可在 Liquid Network 上流通使用的比特币资产。
3. 当用户需要将 L-BTC 转回到比特币主链时,只需将 L-BTC 销毁,Liquid Network 就会释放出等量的比特币,并将其转回到用户在主链上的地址。这个过程称为"比特币的赎回"。
4. Liquid Network 使用联邦机制来验证交易,由 15 个机构共同维护侧链的安全性和交易记录的有效性。

这种侧链/主链的架构有以下优势:

1. 可以充分利用比特币主链的安全性和广泛应用,同时在侧链上实现更快捷的交易和隐私保护。
2. 用户可以自由在主链和侧链之间转移资产,实现跨链互操作。
3. Liquid 联邦的多方验证机制提高了侧链的安全性和可靠性。

总的来说,Liquid Network 是比特币生态中一个典型的侧链跨链解决方案,它在保持比特币主链安全性的前提下,为用户提供了更加灵活和隐私性更强的资产管理方式。这种侧链技术在区块链跨链领域也有广泛的应用前景。





